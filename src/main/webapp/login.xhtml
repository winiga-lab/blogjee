<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <f:event type="preRenderView" listener="#{sessionControl.redirectAuthenticated()}" />

    <h:head>
        <title>Login - Blog JEE</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>
        <h:outputStylesheet library="css" name="style.css" />
        <h:outputStylesheet library="css" name="loginStyle.css" />

    </h:head>
    <h:body class="">
        <ui:include src="/partials/header.xhtml" />
        <div class=" container-fuild row " style="margin-left: 0; margin-right: 0">
            <div class=" mx-auto p-0">
                <div class="card">
                    <div class="login-box" style="color: #000;">
                        <div class="login-snip"> <input id="tab-1" type="radio" name="tab" class="sign-in" checked='true'/><label for="tab-1" class="tab">Connexion</label> <input id="tab-2" type="radio" name="tab" class="sign-up"/><label for="tab-2" class="tab">Inscription</label>
                            <div class="login-space">
                                <div class="login">
                                    <h:form>
                                        <p:messages id="loginMessage" showDetail="false" closable="true" >
                                        </p:messages>
                                        <div class="group"> <label for="user" class="label">Email</label> 
                                            <h:inputText value="#{login.username}" id="user" class="input" a:placeholder="Enter your username" required="true" requiredMessage="Vous devez renseigner l'E-mail de connexion" validatorMessage="Vous avez renseigné(e) un E-mail incorrect">
                                                <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
                                            </h:inputText>
                                        </div>
                                        <div class="group"> <label for="pass" class="label">Password</label> 
                                            <h:inputSecret value="#{login.password}" id="pass" class="input" a:placeholder="Enter your password" required="true" requiredMessage="Vous devez renseigner votre mot de passe de connexion"/> 
                                        </div>
                                        <div class="group"> <input id="check" type="checkbox" class="check" checked='false'/> <label for="check"><span class="icon"></span> Keep me Signed in</label> 
                                        </div>
                                        <div class="group"> <p:commandButton  action="#{login.doLogin()}" class="button" value="S'authentifier" update="@form"/> </div>
                                    </h:form>
                                    <div class="hr"></div>
                                    <div class="foot"> <a href="#">Forgot Password?</a> </div>
                                </div>
                                <div class="sign-up-form">
                                    <h:form id="singupForm">
                                        <p:messages id="singupMessage" showDetail="false" closable="true" >
                                        </p:messages>
                                        <div class="group"> <label for="nom" class="label">Nom</label>
                                            <h:inputText value="#{register.user.nom}" id="nom" class="input" a:placeholder="Doe ..." required="true" requiredMessage="Vous devez renseigner votre nom" validatorMessage="Le nom que vous avez renseigné(e) semble incorrect">
                                                <f:validateLength minimum="2" />
                                                <f:validateRegex pattern="^[a-zA-Z]+(\s[a-zA-Z]+)?$" />
                                            </h:inputText>
                                        </div>
                                        <div class="group"> <label for="prenom" class="label">Prenom</label> 
                                            <h:inputText value="#{register.user.prenom}" id="prenom" class="input" a:placeholder="Jhon ..." required="true" requiredMessage="Vous devez renseigner votre/vos prénom(s)" validatorMessage="Le(s) prénom(s) que vous avez renseigné(e) semble incorrect(s)">
                                                <f:validateLength minimum="2" />
                                                <f:validateRegex pattern="^[a-zA-Z]+(\s[a-zA-Z]+)?$" />
                                            </h:inputText>
                                        </div>
                                        <div class="group"> <label for="email" class="label">Email</label> 
                                            <h:inputText value="#{register.user.email}" id="email" class="input" a:placeholder="jhon.doe@example.com" required="true" requiredMessage="Vous devez renseigner l'E-mail de connexion" validatorMessage="Vous avez renseigné(e) un E-mail incorrect">
                                                <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
                                            </h:inputText>
                                        </div>
                                        <div class="group"> <label for="newPass" class="label">Mot de passe</label> 
                                            <p:password value="#{register.user.password}" id="newPass" class="input" match="confimrPass" a:placeholder="Votre mot de passe" required="true" requiredMessage="Vous devez renseigner votre mot de passe de connexion" validatorMessage="Vote mot de passe n'est pas assez sécurisé ou ne correspond au mot de passe de confirmation" feedback="true" inline="true" redisplay="true">
                                                <f:validateLength minimum="8" />
                                            </p:password>
                                        </div>
                                        <div class="group"> <label for="confimrPass" class="label">Confirmer Mot de passe</label> 
                                            <p:password id="confimrPass" class="input" value="#{register.user.password}" placeholder="Confirmez votre mot de passe" required="true" requiredMessage="Veuillez confirmer votre mot de passe de connexion" feedback="false" redisplay="true"/> 
                                        </div>
                                        <div class="group"> 
                                            <p:commandButton action="#{register.doRegister()}" value="S'enrégistrer" class="button" update="@form" /> 
                                        </div>
                                    </h:form>
                                    <div class="hr"></div>
                                    <div class="foot"> <label for="tab-1">Already Member?</label> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-5"> </div>
        <div class="mt-5"> </div>
        <div class="pt-5">
            <ui:include src="/partials/footer.xhtml" class="pt-5" />
        </div>


    </h:body>

</html>

